// src/App.jsx
import React, { useState, useEffect } from 'react';
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import { ThemeProvider, useTheme } from './context/ThemeContext';
import { AuthProvider, useAuth } from './context/AuthContext';
import HomePage from './pages/HomePage';
import BookReader from './pages/BookReader';
import LoginPage from './pages/LoginPage';
import SignupPage from './pages/SignupPage';
import Dashboard from './pages/Dashboard';
import PaymentPage from './pages/PaymentPage';
import useSession from './hooks/useSession';
import useSecurity from './hooks/useSecurity';
import './App.css';

function App() {
  return (
    <AuthProvider>
      <ThemeProvider>
        <AppRouter />
      </ThemeProvider>
    </AuthProvider>
  );
}

function AppRouter() {
  const { user } = useAuth();
  const { darkMode } = useTheme();
  
  useSession(); // Auto-logout after inactivity
  useSecurity(); // Prevent screenshots and screen recording

  return (
    <div className={`min-h-screen ${darkMode ? 'bg-gray-900 text-white' : 'bg-white text-black'}`}>
      <Router>
        <Routes>
          <Route path="/" element={user ? <HomePage /> : <Navigate to="/login" />} />
          <Route path="/login" element={!user ? <LoginPage /> : <Navigate to="/" />} />
          <Route path="/signup" element={!user ? <SignupPage /> : <Navigate to="/" />} />
          <Route path="/book/:id" element={user ? <BookReader /> : <Navigate to="/login" />} />
          <Route path="/payment" element={user ? <PaymentPage /> : <Navigate to="/login" />} />
          <Route path="/dashboard/*" element={user ? <Dashboard /> : <Navigate to="/login" />} />
        </Routes>
      </Router>
    </div>
  );
}

export default App;
// src/context/AuthContext.jsx
import React, { createContext, useState, useEffect, useContext } from 'react';

const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // Check if user exists in localStorage
    const storedUser = localStorage.getItem('user');
    if (storedUser) {
      setUser(JSON.parse(storedUser));
    }
    setLoading(false);
  }, []);

  const login = (username) => {
    const userData = { username, id: Date.now().toString() };
    localStorage.setItem('user', JSON.stringify(userData));
    setUser(userData);
    return userData;
  };

  const signup = (username, password) => {
    const userData = { username, id: Date.now().toString() };
    localStorage.setItem('user', JSON.stringify(userData));
    setUser(userData);
    return userData;
  };

  const logout = () => {
    localStorage.removeItem('user');
    setUser(null);
  };

  return (
    <AuthContext.Provider value={{ user, login, signup, logout, loading }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => useContext(AuthContext);
// src/context/ThemeContext.jsx
import React, { createContext, useState, useEffect, useContext } from 'react';

const ThemeContext = createContext();

export const ThemeProvider = ({ children }) => {
  const [darkMode, setDarkMode] = useState(false);

  useEffect(() => {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      setDarkMode(savedTheme === 'dark');
    }
  }, []);

  const toggleTheme = () => {
    const newTheme = !darkMode ? 'dark' : 'light';
    setDarkMode(!darkMode);
    localStorage.setItem('theme', newTheme);
  };

  return (
    <ThemeContext.Provider value={{ darkMode, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

export const useTheme = () => useContext(ThemeContext);
// src/hooks/useSession.js
import { useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

export default function useSession() {
  const navigate = useNavigate();
  const { logout } = useAuth();
  let logoutTimer;

  const resetTimer = () => {
    clearTimeout(logoutTimer);
    logoutTimer = setTimeout(() => {
      logout();
      navigate('/login');
    }, 30 * 60 * 1000); // 30 minutes
  };

  useEffect(() => {
    const events = ['mousedown', 'keydown', 'scroll', 'touchstart'];
    events.forEach(event => {
      window.addEventListener(event, resetTimer);
    });

    resetTimer();

    return () => {
      clearTimeout(logoutTimer);
      events.forEach(event => {
        window.removeEventListener(event, resetTimer);
      });
    };
  }, []);
}
// src/hooks/useSecurity.js
import { useEffect } from 'react';

export default function useSecurity() {
  useEffect(() => {
    const handleContextMenu = (e) => {
      if (process.env.NODE_ENV === 'production') {
        e.preventDefault();
      }
    };

    const handleCopy = (e) => {
      if (process.env.NODE_ENV === 'production') {
        e.preventDefault();
      }
    };

    const handleVisibilityChange = () => {
      if (document.hidden) {
        console.warn('Screen recording might be in progress');
      }
    };

    document.addEventListener('contextmenu', handleContextMenu);
    document.addEventListener('copy', handleCopy);
    document.addEventListener('visibilitychange', handleVisibilityChange);

    return () => {
      document.removeEventListener('contextmenu', handleContextMenu);
      document.removeEventListener('copy', handleCopy);
      document.removeEventListener('visibilitychange', handleVisibilityChange);
    };
  }, []);
}
// src/pages/HomePage.jsx
import React, { useState } from 'react';
import BookList from '../components/BookList';
import Header from '../components/Header';
import { useAuth } from '../context/AuthContext';

const HomePage = () => {
  const { user } = useAuth();
  const [searchTerm, setSearchTerm] = useState('');

  // Mock book data - only "The Main Reality Of Life" for now
  const books = [
    {
      id: '1',
      title: 'The Main Reality Of Life',
      author: 'Samuel A.O.',
      coverImage: '/book-covers/main-reality.jpg',
      isFree: false,
      price: 2500,
      description: 'A profound exploration of life\'s deepest truths and illusions',
      freeContent: '...' // First few chapters would go here
    }
  ];

  const filteredBooks = books.filter(book => 
    book.title.toLowerCase().includes(searchTerm.toLowerCase()) || 
    book.author.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <div className="container mx-auto px-4 py-8">
      <Header />
      
      <div className="mt-8 mb-6">
        <div className="relative">
          <input
            type="text"
            placeholder="Search books by title or author..."
            className="w-full p-4 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-black dark:text-white"
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
          />
          <svg 
            className="absolute right-4 top-4 text-gray-400" 
            xmlns="http://www.w3.org/2000/svg" 
            width="24" 
            height="24" 
            viewBox="0 0 24 24"
          >
            <path fill="currentColor" d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3l-1.4 1.4ZM9.5 14q1.875 0 3.188-1.313T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14Z"/>
          </svg>
        </div>
      </div>

      <BookList books={filteredBooks} />
    </div>
  );
};

export default HomePage;
// src/components/BookList.jsx
import React from 'react';
import { Link } from 'react-router-dom';

const BookList = ({ books }) => {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {books.map(book => (
        <div key={book.id} className="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden transition-transform hover:scale-105">
          <div className="flex">
            <div className="w-1/3">
              <img 
                src={book.coverImage} 
                alt={book.title} 
                className="w-full h-full object-cover"
              />
            </div>
            
            <div className="w-2/3 p-4">
              <h3 className="font-bold text-lg text-black dark:text-white">{book.title}</h3>
              <p className="text-gray-600 dark:text-gray-300 text-sm mt-1">By {book.author}</p>
              
              <div className="mt-4">
                {book.isFree ? (
                  <span className="bg-yellow-500 text-white px-3 py-1 rounded-full text-xs font-medium">
                    Free Access
                  </span>
                ) : (
                  <span className="bg-purple-600 text-white px-3 py-1 rounded-full text-xs font-medium">
                    Premium
                  </span>
                )}
              </div>
              
              <div className="mt-4">
                <Link 
                  to={`/book/${book.id}`}
                  className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"
                >
                  Read Now
                </Link>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  );
};

export default BookList;
// src/pages/BookReader.jsx
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useTheme } from '../context/ThemeContext';
import { useAuth } from '../context/AuthContext';
import BookContent from '../data/bookContent';
import Header from '../components/Header';

const BookReader = () => {
  const { id } = useParams();
  const navigate = useNavigate();
  const { darkMode } = useTheme();
  const { user } = useAuth();
  const [book, setBook] = useState(null);
  const [accessLevel, setAccessLevel] = useState('free');
  const [isOffline, setIsOffline] = useState(!navigator.onLine);

  useEffect(() => {
    // In a real app, this would come from an API
    const foundBook = BookContent.find(b => b.id === id);
    
    if (!foundBook) {
      navigate('/');
      return;
    }
    
    setBook(foundBook);
    
    // Check if user has purchased this book
    const purchasedBooks = JSON.parse(localStorage.getItem('purchasedBooks') || [];
    if (purchasedBooks.includes(id)) {
      setAccessLevel('full');
    }
  }, [id, navigate]);

  useEffect(() => {
    const handleOnline = () => setIsOffline(false);
    const handleOffline = () => setIsOffline(true);
    
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);
    
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  const handlePurchase = () => {
    navigate('/payment');
  };

  if (!book) return <div className="text-center py-12">Loading book...</div>;

  return (
    <div className="container mx-auto px-4 py-8">
      <Header />
      
      <div className="mt-8 max-w-4xl mx-auto">
        {isOffline && (
          <div className="bg-yellow-500 text-black p-4 mb-6 rounded-lg text-center">
            You are offline. Reading from cached version.
          </div>
        )}
        
        <div className="text-center mb-8">
          <img 
            src={book.coverImage} 
            alt={book.title} 
            className="mx-auto w-48 h-64 object-cover rounded-lg shadow-lg"
          />
          <h1 className="text-3xl font-bold mt-4 text-black dark:text-white">{book.title}</h1>
          <p className="text-gray-600 dark:text-gray-300 mt-2">By {book.author}</p>
        </div>
        
        <div 
          className={`prose prose-lg max-w-none ${darkMode ? 'prose-invert' : ''} mb-12`}
          dangerouslySetInnerHTML={{ 
            __html: accessLevel === 'full' ? book.fullContent : book.freeContent 
          }}
        />
        
        {accessLevel === 'free' && (
          <div className="bg-gray-100 dark:bg-gray-800 p-6 rounded-lg text-center mb-12">
            <h3 className="text-xl font-bold mb-4">Want to read the full book?</h3>
            <button 
              onClick={handlePurchase}
              className="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg transition-colors"
            >
              Buy Full Access - ₦2,500
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default BookReader;
// src/pages/PaymentPage.jsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import Header from '../components/Header';

const PaymentPage = () => {
  const navigate = useNavigate();
  const { user } = useAuth();
  const [paymentDetails, setPaymentDetails] = useState({
    bookName: 'The Main Reality Of Life',
    amount: 2500,
    accountNumber: '0863542562',
    accountName: 'Alake Samuel',
    bank: 'GTBank',
    email: 'samcreation804@gmail.com',
    whatsapp: '07034969325'
  });
  const [transactionProof, setTransactionProof] = useState(null);
  const [isSubmitted, setIsSubmitted] = useState(false);

  const handleFileChange = (e) => {
    setTransactionProof(e.target.files[0]);
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    
    // In a real app, this would upload the proof to a server
    // For now, we'll simulate the process
    
    // Save purchase locally
    const purchasedBooks = JSON.parse(localStorage.getItem('purchasedBooks') || []);
    purchasedBooks.push('1'); // Book ID for "The Main Reality Of Life"
    localStorage.setItem('purchasedBooks', JSON.stringify(purchasedBooks));
    
    setIsSubmitted(true);
    
    // Redirect to book after 3 seconds
    setTimeout(() => {
      navigate('/book/1');
    }, 3000);
  };

  return (
    <div className="container mx-auto px-4 py-8">
      <Header />
      
      <div className="max-w-3xl mx-auto mt-8">
        <h1 className="text-3xl font-bold text-center mb-8">Complete Your Purchase</h1>
        
        {isSubmitted ? (
          <div className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6">
            <p className="font-bold">Payment Submitted!</p>
            <p>Your payment proof has been sent for verification. You'll be redirected to the book shortly.</p>
          </div>
        ) : (
          <div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8">
            <h2 className="text-xl font-bold mb-4">Payment Instructions</h2>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div className="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                <h3 className="font-semibold mb-2">Bank Transfer Details</h3>
                <p className="mb-1"><span className="font-medium">Bank:</span> {paymentDetails.bank}</p>
                <p className="mb-1"><span className="font-medium">Account Name:</span> {paymentDetails.accountName}</p>
                <p className="mb-1"><span className="font-medium">Account Number:</span> {paymentDetails.accountNumber}</p>
                <p className="mt-3"><span className="font-medium">Amount:</span> ₦{paymentDetails.amount.toLocaleString()}</p>
              </div>
              
              <div className="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                <h3 className="font-semibold mb-2">Book Information</h3>
                <p className="mb-1"><span className="font-medium">Title:</span> {paymentDetails.bookName}</p>
                <p className="mb-1"><span className="font-medium">Price:</span> ₦{paymentDetails.amount.toLocaleString()}</p>
                <p className="mt-3 text-sm text-gray-600 dark:text-gray-400">
                  After payment, please send proof and book name as narration to:
                </p>
                <p className="text-blue-600 dark:text-blue-400">{paymentDetails.email}</p>
                <p className="text-sm mt-2">Or via WhatsApp: {paymentDetails.whatsapp}</p>
              </div>
            </div>
            
            <form onSubmit={handleSubmit}>
              <div className="mb-4">
                <label className="block text-gray-700 dark:text-gray-300 mb-2">
                  Upload Payment Proof
                </label>
                <input
                  type="file"
                  accept="image/*, .pdf"
                  onChange={handleFileChange}
                  className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
              </div>
              
              <div className="mb-4">
                <label className="block text-gray-700 dark:text-gray-300 mb-2">
                  Transaction Reference (Optional)
                </label>
                <input
                  type="text"
                  className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Enter reference number if available"
                />
              </div>
              
              <button
                type="submit"
                className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-colors"
              >
                Submit Payment Proof
              </button>
            </form>
          </div>
        )}
        
        <div className="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative mb-6">
          <p className="font-bold">Important Notice</p>
          <p>Your book access will be activated after manual verification of your payment proof. This usually takes less than 24 hours.</p>
        </div>
      </div>
    </div>
  );
};

export default PaymentPage;
// src/pages/Dashboard.jsx
import React from 'react';
import { Routes, Route, Link, useLocation } from 'react-router-dom';
import Profile from '../components/dashboard/Profile';
import Inbox from '../components/dashboard/Inbox';
import NotificationSettings from '../components/dashboard/NotificationSettings';
import Library from '../components/dashboard/Library';
import LanguageSettings from '../components/dashboard/LanguageSettings';
import Payments from '../components/dashboard/Payments';
import Premium from '../components/dashboard/Premium';
import Settings from '../components/dashboard/Settings';
import HelpAssistant from '../components/dashboard/HelpAssistant';
import Header from '../components/Header';
import { useTheme } from '../context/ThemeContext';
import { useAuth } from '../context/AuthContext';

const Dashboard = () => {
  const { darkMode } = useTheme();
  const { user, logout } = useAuth();
  const location = useLocation();
  
  const menuItems = [
    { path: 'profile', label: 'My Profile', icon: '👤' },
    { path: 'inbox', label: 'Inbox', icon: '📥' },
    { path: 'notification', label: 'Notification', icon: '🔔' },
    { path: 'library', label: 'Library', icon: '📚' },
    { path: 'language', label: 'Language', icon: '🌐' },
    { path: 'payments', label: 'Payments', icon: '💳' },
    { path: 'premium', label: 'Premium', icon: '⭐' },
    { path: 'settings', label: 'Settings', icon: '⚙️' },
    { path: 'help', label: 'Help', icon: '❓' },
  ];

  return (
    <div className="container mx-auto px-4 py-8">
      <Header />
      
      <div className="flex flex-col md:flex-row mt-8 gap-6">
        {/* Sidebar */}
        <div className={`w-full md:w-64 rounded-xl p-4 ${darkMode ? 'bg-gray-800' : 'bg-gray-100'}`}>
          <div className="mb-6">
            <h2 className="text-xl font-bold">Dashboard</h2>
            <p className="text-sm text-gray-500">Welcome, {user?.username}</p>
          </div>
          
          <nav>
            <ul className="space-y-2">
              {menuItems.map(item => (
                <li key={item.path}>
                  <Link
                    to={`/dashboard/${item.path}`}
                    className={`flex items-center px-3 py-2 rounded-lg transition-colors ${
                      location.pathname.includes(item.path) 
                        ? 'bg-blue-600 text-white' 
                        : darkMode 
                          ? 'hover:bg-gray-700' 
                          : 'hover:bg-gray-200'
                    }`}
                  >
                    <span className="mr-3">{item.icon}</span>
                    {item.label}
                  </Link>
                </li>
              ))}
              
              <li>
                <button
                  onClick={logout}
                  className={`flex items-center w-full px-3 py-2 rounded-lg transition-colors ${
                    darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-200'
                  }`}
                >
                  <span className="mr-3">🚪</span>
                  Logout
                </button>
              </li>
            </ul>
          </nav>
        </div>
        
        {/* Main Content */}
        <div className="flex-1">
          <Routes>
            <Route path="profile" element={<Profile />} />
            <Route path="inbox" element={<Inbox />} />
            <Route path="notification" element={<NotificationSettings />} />
            <Route path="library" element={<Library />} />
            <Route path="language" element={<LanguageSettings />} />
            <Route path="payments" element={<Payments />} />
            <Route path="premium" element={<Premium />} />
            <Route path="settings" element={<Settings />} />
            <Route path="help" element={<HelpAssistant />} />
            <Route index element={<Profile />} />
          </Routes>
        </div>
      </div>
    </div>
  );
};

export default Dashboard;
// src/components/dashboard/Library.jsx
import React, { useState } from 'react';
import { Link } from 'react-router-dom';

const Library = () => {
  // Get purchased books from localStorage
  const purchasedBooks = JSON.parse(localStorage.getItem('purchasedBooks') || []);
  
  // Mock book data - only "The Main Reality Of Life" for now
  const books = [
    {
      id: '1',
      title: 'The Main Reality Of Life',
      author: 'Samuel A.O.',
      coverImage: '/book-covers/main-reality.jpg',
      lastRead: '2023-10-15',
      progress: 42
    }
  ].filter(book => purchasedBooks.includes(book.id));

  const [isOffline, setIsOffline] = useState(!navigator.onLine);

  return (
    <div className="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
      <h2 className="text-2xl font-bold mb-6">My Library</h2>
      
      {isOffline && (
        <div className="bg-yellow-500 text-black p-3 rounded-lg mb-6">
          You are currently offline. Only downloaded books are available.
        </div>
      )}
      
      {books.length === 0 ? (
        <div className="text-center py-12">
          <p className="text-gray-500 mb-4">You haven't purchased any books yet.</p>
          <Link 
            to="/" 
            className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg"
          >
            Browse Books
          </Link>
        </div>
      ) : (
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {books.map(book => (
            <div key={book.id} className="border border-gray-200 dark:border-gray-700 rounded-lg p-4 flex">
              <div className="w-24 flex-shrink-0">
                <img 
                  src={book.coverImage} 
                  alt={book.title} 
                  className="w-full h-32 object-cover rounded-lg"
                />
              </div>
              
              <div className="ml-4 flex-1">
                <h3 className="font-bold text-lg">{book.title}</h3>
                <p className="text-gray-600 dark:text-gray-300 text-sm">By {book.author}</p>
                
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-1">
                    <span className="text-sm text-gray-500">Progress: {book.progress}%</span>
                    <span className="text-sm text-gray-500">Last read: {book.lastRead}</span>
                  </div>
                  <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                    <div 
                      className="bg-blue-600 h-2 rounded-full" 
                      style={{ width: `${book.progress}%` }}
                    ></div>
                  </div>
                </div>
                
                <div className="mt-4">
                  <Link 
                    to={`/book/${book.id}`}
                    className="bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-4 rounded-lg mr-2"
                  >
                    Continue Reading
                  </Link>
                  <button className="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-sm font-medium py-2 px-4 rounded-lg">
                    Download
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
};

export default Library;
// src/components/dashboard/HelpAssistant.jsx
import React, { useState, useRef, useEffect } from 'react';

const HelpAssistant = () => {
  const [messages, setMessages] = useState([
    { text: "Hello! I'm your InsightAtlas assistant. How can I help you today?", sender: 'ai' }
  ]);
  const [input, setInput] = useState('');
  const messagesEndRef = useRef(null);
  
  const commonQuestions = [
    "How do I purchase a book?",
    "How do I read offline?",
    "How do I change my password?",
    "I have a payment issue",
    "Contact support"
  ];

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!input.trim()) return;
    
    // Add user message
    const userMessage = { text: input, sender: 'user' };
    setMessages(prev => [...prev, userMessage]);
    setInput('');
    
    // Simulate AI response after a delay
    setTimeout(() => {
      let response = "I'm here to help. Could you please provide more details?";
      
      if (input.toLowerCase().includes('payment') || input.toLowerCase().includes('purchase')) {
        response = "To purchase a book, click the 'Buy Full Access' button on the book page. You'll be guided through the payment process where you'll transfer to our GTBank account. After payment, send the proof to samcreation804@gmail.com with the book name as narration.";
      } 
      else if (input.toLowerCase().includes('offline')) {
        response = "To read offline, go to your Library and click the Download button next to any book you've purchased. Once downloaded, you can read it anytime without an internet connection.";
      }
      else if (input.toLowerCase().includes('password')) {
        response = "You can change your password in Settings > Account Security. If you've forgotten your password, please contact support at samcreation804@gmail.com.";
      }
      else if (input.toLowerCase().includes('contact') || input.toLowerCase().includes('support')) {
        response = "You can contact our support team via email at samcreation804@gmail.com or WhatsApp at 07034969325. We typically respond within 24 hours.";
      }
      
      setMessages(prev => [...prev, { text: response, sender: 'ai' }]);
    }, 1000);
  };

  return (
    <div className="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
      <h2 className="text-2xl font-bold mb-6">Help Assistant</h2>
      
      <div className="border rounded-lg overflow-hidden h-[500px] flex flex-col">
        <div className="flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900">
          {messages.map((msg, i) => (
            <div 
              key={i} 
              className={`mb-4 ${msg.sender === 'user' ? 'text-right' : ''}`}
            >
              <div 
                className={`inline-block p-3 rounded-lg max-w-[80%] ${
                  msg.sender === 'user' 
                    ? 'bg-blue-600 text-white rounded-br-none' 
                    : 'bg-gray-200 dark:bg-gray-700 rounded-bl-none'
                }`}
              >
                {msg.text}
              </div>
            </div>
          ))}
          <div ref={messagesEndRef} />
        </div>
        
        <div className="border-t p-4 bg-white dark:bg-gray-800">
          <form onSubmit={handleSubmit} className="flex">
            <input
              type="text"
              value={input}
              onChange={(e) => setInput(e.target.value)}
              placeholder="Ask a question..."
              className="flex-1 border border-gray-300 dark:border-gray-600 rounded-l-lg p-3 focus:outline-none"
            />
            <button 
              type="submit" 
              className="bg-blue-600 text-white px-6 rounded-r-lg font-medium"
            >
              Send
            </button>
          </form>
          
          <div className="mt-3">
            <p className="text-sm text-gray-500 mb-2">Common questions:</p>
            <div className="flex flex-wrap gap-2">
              {commonQuestions.map((q, i) => (
                <button
                  key={i}
                  onClick={() => setInput(q)}
                  className="text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 px-3 py-1 rounded-lg"
                >
                  {q}
                </button>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default HelpAssistant;
// src/data/bookContent.js
const BookContent = [
  {
    id: '1',
    title: 'The Main Reality Of Life',
    author: 'Samuel A.O.',
    coverImage: '/book-covers/main-reality.jpg',
    isFree: false,
    price: 2500,
    freeContent: `
      <h1>THE MAIN REALITY OF LIFE</h1>
      <h2>SAMUEL A.O</h2>
      
      <h3>APPRECIATION</h3>
      <p>Primarily, my endless thanks to God Almighty for seeing me through this journey...</p>
      
      <!-- More free content here - first few chapters -->
      
      <h3>Chapter 1: The Illusion vs. The Reality</h3>
      <p>"Everyone is chasing something — success, love, validation, peace. But few stop to ask: What am I really chasing, and why?"</p>
      
      <p>From the moment we're born, we're introduced to a script, not handed to us directly but absorbed through the voices and expectations of those around us...</p>
      
      <!-- Continue with the free content -->
    `,
    fullContent: `
      <h1>THE MAIN REALITY OF LIFE</h1>
      <h2>SAMUEL A.O</h2>
      
      <h3>APPRECIATION</h3>
      <p>Primarily, my endless thanks to God Almighty for seeing me through this journey...</p>
      
      <!-- The ENTIRE book content would go here -->
      
      <h3>Chapter 10: The Journey Ahead — Living Your Main Reality</h3>
      <p>The End is Just the Beginning</p>
      
      <p>As we reach the final chapter of this exploration into The Main Reality Of Life...</p>
      
      <h3>ABOUT THE AUTHOR</h3>
      <p>Samuel A.O. is currently a student of Ekiti State University in the department of Statistics...</p>
    `
  }
];

export default BookContent;
