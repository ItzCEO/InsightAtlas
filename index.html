<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsightAtlas - The Main Reality Of Life</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #ffd166;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-text: #f1f5f9;
            --light-bg: #f8fafc;
            --light-card: #ffffff;
            --light-text: #1e293b;
            --accent: #ff6b6b;
            --premium: #ffb700;
            --gray: #94a3b8;
            --success: #06d6a0;
            --warning: #ffd166;
            --danger: #ef476f;
            --gold: #ffb700;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --border-radius: 12px;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--dark-text);
            transition: background-color 0.3s ease;
            padding-bottom: 80px;
            min-height: 100vh;
        }
        
        body.light-mode {
            background-color: var(--light-bg);
            color: var(--light-text);
        }
        
        body.light-mode .book-card,
        body.light-mode header,
        body.light-mode .bottom-nav,
        body.light-mode .section-content,
        body.light-mode .about-section,
        body.light-mode .offline-section {
            background-color: var(--light-card);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Auth Container */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .auth-box {
            width: 100%;
            max-width: 450px;
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo-text {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(90deg, #4361ee, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1px;
            margin-bottom: 10px;
            font-family: 'Montserrat', sans-serif;
        }
        
        .auth-subtitle {
            color: var(--gray);
            font-size: 16px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--gray);
        }
        
        .form-control {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--dark-text);
            font-size: 16px;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            background-color: rgba(67, 97, 238, 0.1);
        }
        
        .password-container {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--gray);
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            margin-bottom: 15px;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(67, 97, 238, 0.3);
        }
        
        .auth-footer {
            text-align: center;
            margin-top: 20px;
            color: var(--gray);
            font-size: 14px;
        }
        
        .auth-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }
        
        .auth-footer a:hover {
            text-decoration: underline;
        }
        
        .forgot-password {
            display: block;
            text-align: right;
            margin: 5px 0 20px;
            color: var(--gray);
            font-size: 14px;
            text-decoration: none;
        }
        
        .forgot-password:hover {
            color: var(--primary);
            text-decoration: underline;
        }
        
        .error-message {
            color: var(--danger);
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .success-message {
            color: var(--success);
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        /* Main App Container */
        .app-container {
            display: none;
        }
        
        header {
            background-color: var(--dark-card);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }
        
        .light-mode header {
            background-color: var(--light-card);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            position: relative;
        }
        
        .notification-bell {
            position: relative;
            cursor: pointer;
            font-size: 20px;
            color: var(--gray);
            margin-right: 15px;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .hero-section {
            padding: 30px 0;
            text-align: center;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 0 0 30px 30px;
            margin-bottom: 30px;
        }
        
        .light-mode .hero-section {
            background: linear-gradient(135deg, #e0e7ff, #dbeafe);
        }
        
        .hero-title {
            font-size: 28px;
            margin-bottom: 15px;
            background: linear-gradient(90deg, var(--accent), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero-subtitle {
            color: var(--gray);
            margin-bottom: 25px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .section-title {
            font-size: 20px;
            margin: 25px 0 15px;
            padding-left: 10px;
            border-left: 4px solid var(--accent);
        }
        
        .book-card {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .light-mode .book-card {
            background-color: var(--light-card);
        }
        
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .book-cover {
            height: 300px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #2c2c2c;
            color: white;
            text-align: center;
            padding: 20px;
            font-weight: bold;
            line-height: 1.4;
            flex-direction: column;
        }
        
        .cover-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 10px;
            font-family: 'Merriweather', serif;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .cover-author {
            font-size: 20px;
            font-style: italic;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        
        .book-info {
            padding: 20px;
            text-align: center;
        }
        
        .book-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .book-author {
            font-size: 16px;
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        .book-price {
            font-size: 22px;
            font-weight: 700;
            color: var(--premium);
            margin-bottom: 15px;
        }
        
        .book-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .btn-read {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-read:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(67, 97, 238, 0.3);
        }
        
        .btn-buy {
            background: linear-gradient(135deg, var(--success), #05b388);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-buy:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(5, 179, 136, 0.3);
        }
        
        .reader-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            display: none;
        }
        
        .reader-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .reader-book-cover {
            width: 180px;
            height: 240px;
            border-radius: 12px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #2c2c2c;
            color: white;
            text-align: center;
            padding: 20px;
            font-weight: bold;
            line-height: 1.4;
            box-shadow: var(--shadow);
            flex-direction: column;
        }
        
        .reader-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
        }
        
        .reader-author {
            font-size: 18px;
            color: var(--gray);
            margin-bottom: 24px;
        }
        
        .reader-content {
            line-height: 1.8;
            font-size: 18px;
            padding: 20px 0;
            font-family: 'Merriweather', Georgia, serif;
        }
        
        .reader-content h1, 
        .reader-content h2, 
        .reader-content h3 {
            margin: 32px 0 16px;
            color: var(--accent);
            font-family: 'Montserrat', sans-serif;
        }
        
        .reader-content p {
            margin-bottom: 24px;
            letter-spacing: 0.3px;
        }
        
        .free-access {
            position: relative;
        }
        
        .free-access::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(to bottom, rgba(30, 41, 59, 0.1), var(--dark-bg));
            pointer-events: none;
        }
        
        .light-mode .free-access::after {
            background: linear-gradient(to bottom, rgba(248, 250, 252, 0.1), var(--light-bg));
        }
        
        .upgrade-box {
            background: linear-gradient(135deg, #ffb700, #ffd166);
            border-radius: var(--border-radius);
            padding: 32px;
            text-align: center;
            margin: 48px 0;
            box-shadow: var(--shadow);
        }
        
        .upgrade-title {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 16px;
            color: #1e293b;
        }
        
        .upgrade-price {
            font-size: 36px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 24px;
        }
        
        .btn-upgrade {
            background-color: #1e293b;
            color: white;
            padding: 16px 40px;
            border-radius: 8px;
            border: none;
            font-weight: 700;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }
        
        .btn-upgrade:hover {
            background-color: #0f172a;
            transform: translateY(-3px);
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--dark-card);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            z-index: 100;
        }
        
        .light-mode .bottom-nav {
            background-color: var(--light-card);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--gray);
            text-decoration: none;
            font-size: 12px;
            transition: all 0.2s ease;
        }
        
        .nav-item.active {
            color: var(--accent);
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .locked-content {
            display: none;
        }
        
        /* Welcome Modal */
        .welcome-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .welcome-content {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            padding: 40px;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
        }
        
        .welcome-title {
            font-size: 32px;
            margin-bottom: 20px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .welcome-message {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .welcome-features {
            text-align: left;
            margin: 20px 0;
            padding-left: 20px;
        }
        
        .welcome-features li {
            margin-bottom: 10px;
        }
        
        .btn-continue {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 12px 30px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-continue:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(67, 97, 238, 0.3);
        }
        
        /* Share Section */
        .share-section {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 30px;
            text-align: center;
        }
        
        .share-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .share-link-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .share-link {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--gray);
            color: var(--dark-text);
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .btn-copy {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-copy:hover {
            background-color: var(--primary-dark);
        }
        
        .share-icons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .share-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .share-icon.whatsapp {
            background-color: #25D366;
        }
        
        .share-icon.facebook {
            background-color: #3b5998;
        }
        
        .share-icon.twitter {
            background-color: #1DA1F2;
        }
        
        .share-icon.link {
            background-color: var(--accent);
        }
        
        .share-icon:hover {
            transform: translateY(-5px);
        }
        
        /* Offline Section */
        .offline-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            display: none;
        }
        
        .offline-section {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .offline-title {
            font-size: 22px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray);
            color: var(--accent);
        }
        
        .offline-empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }
        
        .offline-empty i {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .offline-book-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .offline-book-item {
            background-color: var(--dark-bg);
            border-radius: var(--border-radius);
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        
        .light-mode .offline-book-item {
            background-color: #e2e8f0;
        }
        
        .offline-book-item:hover {
            transform: translateY(-5px);
        }
        
        .offline-book-cover {
            width: 100px;
            height: 150px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #2c2c2c;
            color: white;
            font-size: 14px;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            line-height: 1.4;
        }
        
        .offline-book-cover-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .offline-book-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .offline-book-author {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        /* Settings View */
        .settings-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            display: none;
        }
        
        .settings-section {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .settings-title {
            font-size: 22px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray);
            color: var(--accent);
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .setting-item {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .setting-label {
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .setting-label i {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--accent);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        select {
            padding: 8px 12px;
            border-radius: 8px;
            background-color: var(--dark-card);
            color: var(--dark-text);
            border: 1px solid var(--gray);
            width: 100%;
        }
        
        .light-mode select {
            background-color: var(--light-card);
            color: var(--light-text);
        }
        
        .btn-logout {
            background-color: var(--danger);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }
        
        .btn-logout:hover {
            background-color: #d32f2f;
            transform: translateY(-2px);
        }
        
        /* Responsive Design */
        @media (min-width: 768px) {
            .book-cover {
                height: 400px;
            }
            
            .cover-title {
                font-size: 42px;
            }
            
            .cover-author {
                font-size: 24px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Montserrat:wght@500;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Authentication Section -->
    <div class="auth-container" id="auth-view">
        <div class="auth-box">
            <div class="auth-header">
                <div class="logo-text">InsightAtlas</div>
                <div class="auth-subtitle">Unlock the reality of life through knowledge</div>
            </div>
            
            <!-- Login Form -->
            <form id="login-form">
                <div class="form-group">
                    <label for="login-username">Username</label>
                    <input type="text" id="login-username" class="form-control" placeholder="Enter your username">
                    <div class="error-message" id="login-username-error">Please enter your username</div>
                </div>
                
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <div class="password-container">
                        <input type="password" id="login-password" class="form-control" placeholder="Enter your password">
                        <i class="toggle-password fas fa-eye" data-target="login-password"></i>
                    </div>
                    <div class="error-message" id="login-password-error">Please enter your password</div>
                    <a href="#" class="forgot-password" id="forgot-password-link">Forgot password?</a>
                </div>
                
                <button type="submit" class="btn btn-primary">Login to Your Account</button>
                
                <div class="auth-footer">
                    Don't have an account? <a href="#" id="signup-link">Sign up now</a>
                </div>
            </form>
            
            <!-- Sign Up Form -->
            <form id="signup-form" style="display: none;">
                <div class="form-group">
                    <label for="signup-email">Email Address</label>
                    <input type="email" id="signup-email" class="form-control" placeholder="Enter your email">
                    <div class="error-message" id="signup-email-error">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label for="signup-username">Username</label>
                    <input type="text" id="signup-username" class="form-control" placeholder="Create a unique username">
                    <div class="error-message" id="signup-username-error">Username must be at least 4 characters</div>
                    <div class="success-message" id="signup-username-available">Username available!</div>
                </div>
                
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <div class="password-container">
                        <input type="password" id="signup-password" class="form-control" placeholder="Create a strong password">
                        <i class="toggle-password fas fa-eye" data-target="signup-password"></i>
                    </div>
                    <div class="error-message" id="signup-password-error">Password must be at least 8 characters</div>
                </div>
                
                <div class="form-group">
                    <label for="signup-confirm-password">Confirm Password</label>
                    <div class="password-container">
                        <input type="password" id="signup-confirm-password" class="form-control" placeholder="Confirm your password">
                        <i class="toggle-password fas fa-eye" data-target="signup-confirm-password"></i>
                    </div>
                    <div class="error-message" id="signup-confirm-password-error">Passwords do not match</div>
                </div>
                
                <button type="submit" class="btn btn-primary">Create Account</button>
                
                <div class="auth-footer">
                    Already have an account? <a href="#" id="login-link">Login here</a>
                </div>
            </form>
            
            <!-- Forgot Password Form -->
            <form id="forgot-password-form" style="display: none;">
                <div class="form-group">
                    <label for="reset-email">Email Address</label>
                    <input type="email" id="reset-email" class="form-control" placeholder="Enter your registered email">
                    <div class="error-message" id="reset-email-error">Please enter your registered email</div>
                    <div class="success-message" id="reset-email-success">OTP has been sent to your email!</div>
                </div>
                
                <button type="submit" class="btn btn-primary">Send OTP</button>
                
                <div class="auth-footer">
                    Remembered your password? <a href="#" id="back-to-login">Back to login</a>
                </div>
            </form>
            
            <!-- OTP Verification Form -->
            <form id="otp-form" style="display: none;">
                <div class="form-group">
                    <label>Enter 6-digit OTP sent to your email</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <input type="text" class="otp-input" maxlength="1" data-index="1" style="width: 15%; height: 50px; text-align: center; font-size: 20px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: rgba(255, 255, 255, 0.05); color: var(--dark-text);">
                        <input type="text" class="otp-input" maxlength="1" data-index="2" style="width: 15%; height: 50px; text-align: center; font-size: 20px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: rgba(255, 255, 255, 0.05); color: var(--dark-text);">
                        <input type="text" class="otp-input" maxlength="1" data-index="3" style="width: 15%; height: 50px; text-align: center; font-size: 20px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: rgba(255, 255, 255, 0.05); color: var(--dark-text);">
                        <input type="text" class="otp-input" maxlength="1" data-index="4" style="width: 15%; height: 50px; text-align: center; font-size: 20px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: rgba(255, 255, 255, 0.05); color: var(--dark-text);">
                        <input type="text" class="otp-input" maxlength="1" data-index="5" style="width: 15%; height: 50px; text-align: center; font-size: 20px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: rgba(255, 255, 255, 0.05); color: var(--dark-text);">
                        <input type="text" class="otp-input" maxlength="1" data-index="6" style="width: 15%; height: 50px; text-align: center; font-size: 20px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: rgba(255, 255, 255, 0.05); color: var(--dark-text);">
                    </div>
                    <div class="error-message" id="otp-error">Invalid OTP. Please try again.</div>
                    <div class="auth-footer" style="margin-top: 10px;">
                        Didn't receive OTP? <a href="#" id="resend-otp">Resend OTP</a>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">Verify OTP</button>
                
                <div class="auth-footer">
                    <a href="#" id="back-to-login-otp">Back to login</a>
                </div>
            </form>
            
            <!-- Reset Password Form -->
            <form id="reset-password-form" style="display: none;">
                <div class="form-group">
                    <label for="new-password">New Password</label>
                    <div class="password-container">
                        <input type="password" id="new-password" class="form-control" placeholder="Create a new password">
                        <i class="toggle-password fas fa-eye" data-target="new-password"></i>
                    </div>
                    <div class="error-message" id="new-password-error">Password must be at least 8 characters</div>
                </div>
                
                <div class="form-group">
                    <label for="confirm-new-password">Confirm New Password</label>
                    <div class="password-container">
                        <input type="password" id="confirm-new-password" class="form-control" placeholder="Confirm your new password">
                        <i class="toggle-password fas fa-eye" data-target="confirm-new-password"></i>
                    </div>
                    <div class="error-message" id="confirm-new-password-error">Passwords do not match</div>
                </div>
                
                <button type="submit" class="btn btn-primary">Reset Password</button>
                
                <div class="auth-footer">
                    <a href="#" id="back-to-login-reset">Back to login</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Welcome Modal -->
    <div class="welcome-modal" id="welcome-modal">
        <div class="welcome-content">
            <h2 class="welcome-title">Welcome to InsightAtlas!</h2>
            <div class="welcome-message">
                <p>We're thrilled to have you join our community of readers. InsightAtlas is designed to help you discover life's deepest truths through transformative literature.</p>
            </div>
            
            <ul class="welcome-features">
                <li>üìö Access our exclusive collection of life-changing books</li>
                <li>üîí Read purchased books anytime, even offline</li>
                <li>üåê Sync your progress across all devices</li>
                <li>üéÅ Get special discounts on new releases</li>
            </ul>
            
            <button class="btn-continue" id="close-welcome">Start Reading</button>
        </div>
    </div>
    
    <!-- Main App Content -->
    <div class="app-container" id="app-view">
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo" id="logo">
                        <div class="logo-text">InsightAtlas</div>
                    </div>
                    
                    <div class="header-buttons">
                        <div class="notification-bell" id="notification-bell">
                            <i class="fas fa-bell"></i>
                            <div class="notification-badge" id="notification-badge">3</div>
                        </div>
                        <div class="user-avatar" id="user-avatar">U</div>
                    </div>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Home View -->
            <div id="home-view">
                <div class="hero-section">
                    <h1 class="hero-title">The Main Reality Of Life</h1>
                    <p class="hero-subtitle">Discover the transformative insights that will change how you experience life</p>
                </div>

                <div class="section-title">
                    <span>Featured Book</span>
                </div>
                
                <div class="book-card">
                    <div class="book-cover">
                        <div class="cover-title">The Main Reality Of Life</div>
                        <div class="cover-author">By Samuel A.O</div>
                    </div>
                    <div class="book-info">
                        <div class="book-title">The Main Reality Of Life</div>
                        <div class="book-author">By Samuel A.O.</div>
                        <div class="book-price">‚Ç¶10,000</div>
                        <div class="book-actions">
                            <button class="btn-read" id="read-now-btn">
                                <i class="fas fa-book-open"></i> Read Now
                            </button>
                            <button class="btn-buy" id="buy-book-btn">
                                <i class="fas fa-shopping-cart"></i> Buy Now
                            </button>
                        </div>
                    </div>
                </div>

                <div class="section-title" style="margin-top: 40px;">
                    <span>About the Book</span>
                </div>
                
                <div class="about-section">
                    <p style="line-height: 1.6; margin-bottom: 15px;">
                        "The Main Reality Of Life" is an invitation to uncover the deeper truths that define who we are and how we experience the world. It's about stripping away illusions to see life clearly.
                    </p>
                    <p style="line-height: 1.6; margin-bottom: 15px;">
                        By the time you finish this book, you'll feel empowered to make conscious decisions that align with your truest self and step boldly into the life you are meant to live.
                    </p>
                    <p style="line-height: 1.6;">
                        This book peels back layers of the human experience and offers insights to help you live more intentionally, authentically, and fully.
                    </p>
                </div>
                
                <!-- Share Section -->
                <div class="share-section">
                    <h3 class="share-title">Share InsightAtlas with Friends</h3>
                    <div class="share-link-container">
                        <input type="text" class="share-link" id="share-link" value="https://insightatlas.app/samuel" readonly>
                        <button class="btn-copy" id="copy-link">Copy Link</button>
                    </div>
                    <p>Share this link to give friends access to InsightAtlas before it's on app stores!</p>
                    
                    <div class="share-icons">
                        <div class="share-icon whatsapp" title="Share via WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </div>
                        <div class="share-icon facebook" title="Share on Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </div>
                        <div class="share-icon twitter" title="Share on Twitter">
                            <i class="fab fa-twitter"></i>
                        </div>
                        <div class="share-icon link" title="Copy Link">
                            <i class="fas fa-link"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reader View -->
            <div class="reader-container" id="reader-view">
                <div class="reader-header">
                    <div class="reader-book-cover">
                        <div class="cover-title">The Main Reality Of Life</div>
                        <div class="cover-author">By Samuel A.O</div>
                    </div>
                    <h1 class="reader-title">The Main Reality Of Life</h1>
                    <div class="reader-author">By Samuel A.O.</div>
                </div>
                
                <div class="reader-content">
                    <h1>THE MAIN REALITY OF LIFE</h1>
                    <h2>SAMUEL A.O</h2>
                    
                    <h3>APPRECIATION</h3>
                    <p>Primarily, my endless thanks to God Almighty for seeing me through this journey and to my mother who gave me her full support in ways she could and I'm grateful to her.</p>
                    
                    <p>Immense gratitude to my incredible beta reader, my one and only sister. Your insightful feedback, sharp eyes, and willingness to wade through early drafts were invaluable. A huge thank you to my editor and cover designer for the stunning cover that perfectly captures the spirit of the book.</p>
                    
                    <p>To my dear friends, Oluwaseyifunmitan and Oluwashindara, thank you for the pep talks, and listening ears.</p>
                    
                    <p>Finally, to you the reader, for picking up this book and stepping into this world. I hope it brings you as much joy as writing it brought me. I love you all and enjoy and be impacted as you read.</p>
                    
                    <h3>INDEX</h3>
                    <p>Chapter 1: The Illusion Vs The Reality</p>
                    <p>Chapter 2: Pain Has A Purpose</p>
                    <p>Chapter 3: Your Choices, Your Life</p>
                    <p>Chapter 4: The people In Your Boat</p>
                    <p>Chapter 5: The Truth About Failure</p>
                    <p>Chapter 6: The Decision That Defines You</p>
                    <p>Chapter 7: The Silent battles We Fight</p>
                    <p>Chapter 8: The Power Of Belief - What Shapes Your Reality</p>
                    <p>Chapter 9: Taking The Leap - From Belief To Action</p>
                    <p>Chapter 10: The Journey Ahead - Living Your Main Reality</p>
                    
                    <h3>INTRODUCTION</h3>
                    <p><strong>Stepping Into Your Main Reality.</strong></p>
                    
                    <p>Life is a complex journey filled with moments of clarity and confusion, joy and pain, certainty, and doubt. We all navigate a world layered with illusions, stories we tell ourselves and narratives shaped by others. But beneath those layers lies a deeper truth: a main reality that defines who we are and how we experience the world. This book is an invitation to uncover that main reality.</p>
                    
                    <p>It's about stripping away illusions to see life clearly.</p>
                    
                    <p>It's about embracing pain as a teacher, not an enemy.</p>
                    
                    <p>It's about understanding that your choices shape your destiny.</p>
                    
                    <p>It's about surrounding yourself with the right people who support your journey.</p>
                    
                    <p>It's about redefining failure as a stepping stone to growth.</p>
                    
                    <p>It's about recognizing the power of belief and then moving beyond belief into courageous action.</p>
                    
                    <p>Each chapter in this book peels back a layer of the human experience and offers insights to help you live more intentionally, authentically, and fully. The reality of life is not something that simply happens to you, it's something you create moment by moment.</p>
                    
                    <p>By the time you finish this book, my hope is that you'll feel empowered to make conscious decisions that align with your truest self and step boldly into the life you are meant to live.</p>
                    
                    <p>This is your journey. This is your main reality. Let's begin.</p>
                    
                    <h3>MONOLOGUE</h3>
                    <p>I want you to stop for a moment. Just pause and breathe. Look around you. Look inside you.</p>
                    
                    <p>How often do you feel truly seen? Utterly understood? Truly alive?</p>
                    
                    <p>Life isn't always what it seems, is it?</p>
                    
                    <p>So much of what we chase‚Äîsuccess, approval, comfort‚Äîfeels just out of reach.</p>
                    
                    <p>We get lost in stories we tell ourselves, in masks we wear, in voices that aren't really ours.</p>
                    
                    <p>But beneath all that noise, beneath all that struggle, there is something real. Something steady. Something waiting for you to discover it.</p>
                    
                    <p>Your main reality.</p>
                    
                    <p>It's not about perfection. It's not about never falling. It's about standing up, repeatedly, with clarity and courage.</p>
                    
                    <p>It's about knowing that your pain, your failures, your choices‚Äîthey matter. They shape the life only you can live.</p>
                    
                    <p>This book isn't about giving you answers. It's about inviting you to ask better questions. To see more clearly. To live more fully.</p>
                    
                    <p>Because the truth is, the power to create your reality is in your hands.</p>
                    
                    <p>And I'm here to walk beside you, through the illusions, the pain, and the fears toward the life you were meant to live.</p>
                    
                    <p>Are you ready?</p>
                    
                    <div class="free-access">
                        <h1>Chapter 1: The Illusion vs. The Reality</h1>
                        <p>"Everyone is chasing something ‚Äî success, love, validation, peace. But few stop to ask: What am I really chasing, and why?"</p>
                        
                        <p>From the moment we're born, we're introduced to a script, not handed to us directly but absorbed through the voices and expectations of those around us. Our parents, our teachers, our culture, even the movies and music we consume, all play a part in painting a picture of how life should be. We're told: "Do this, and you'll be happy. Avoid that, and you'll be safe. Achieve these things, and your life will be meaningful."</p>
                        
                        <p>It's not all bad. These ideals often come from a place of care, from people who want the best for us. But over time, many of us come to realize something unsettling: the life we were taught to expect doesn't always match the one we experience.</p>
                        
                        <p>Some people realize this early perhaps in childhood, when their family struggled financially, or when they saw loved ones fighting battles no one talked about. Others experience it much later, perhaps after achieving the very things they thought would bring joy, only to feel emptier than before.</p>
                        
                        <p>The truth? Life doesn't always deliver what it promises.</p>
                        
                        <p>And that's not because life is cruel‚Ä¶ it's because the promises weren't real to begin with.</p>
                        
                        <h2>The Dream We're Sold</h2>
                        <p>It starts with a narrative ‚Äî simple, idealistic, and appealing.</p>
                    </div>
                </div>
                
                <div class="upgrade-box">
                    <h2 class="upgrade-title">Want to read the full book?</h2>
                    <div class="upgrade-price">‚Ç¶10,000</div>
                    <button class="btn-upgrade" id="unlock-btn">
                        <i class="fas fa-lock"></i> Unlock Full Access
                    </button>
                </div>

                <div class="locked-content">
                    <p>Get an education, and you'll be successful. Be nice to others, and they'll be nice in return. Fall in love, and everything will fall into place. If you work hard, life will reward you. If you avoid mistakes, you'll avoid pain. But then real life begins to unfold. You study hard, but the job doesn't come. You love someone, but they don't love you back. You give your all, but it's not enough. You do everything "right," yet still feel like everything is going wrong. This disconnect between expectation and reality is one of the main sources of frustration and pain in people's lives. We suffer not just because life is difficult but because we were led to believe it wouldn't be.</p>
                    
                    <p>We're sold a dream, and when the dream starts to crumble, we often assume the problem is us.</p>
                    
                    <p>"Maybe I'm not good enough."</p>
                    
                    <p>"Maybe I'm cursed."</p>
                    
                    <p>"Maybe I made the wrong choices."</p>
                    
                    <p>But maybe‚Ä¶ nothing's wrong at all. Maybe you've just reached the point where life starts getting real.</p>
                    
                    <h2>The Awakening: When the Illusion Breaks</h2>
                    <p>Let me tell you a story.</p>
                    
                    <p>There was a young man named Dayo. In secondary school, he was the star. Top of his class, respectful, obedient, hopeful. Teachers said he was destined for greatness. His parents invested all they had in his education. Dayo believed, as many did, that life was linear: input equals' output. But life didn't go as planned. He didn't get the scholarship. His business failed. Friends drifted. He sank into depression, ashamed to talk to anyone. He kept asking, "What did I do wrong?". The turning point came not from success, but from surrender. One day, he simply sat in silence and asked a different question: "What if this is just life?"</p>
                    
                    <p>Not punishment. Not failure. Just‚Ä¶ life.</p>
                    
                    <p>That question freed him. He began to detach his self-worth from his circumstances. He stopped judging himself by timelines or societal milestones. He started living with curiosity rather than control. He took small steps - volunteering, writing, learning new skills, not because it guaranteed success, but because it felt true.</p>
                    
                    <p>And slowly, his life took on new meaning - one based, not illusion.</p>
                    
                    <!-- More content would continue here in the full version -->
                </div>
            </div>
            
            <!-- Settings View -->
            <div class="settings-container" id="settings-view">
                <div class="settings-section">
                    <h2 class="settings-title">Appearance</h2>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <i class="fas fa-moon"></i>
                            <span>Dark Mode</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="dark-mode-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <i class="fas fa-font"></i>
                            <span>Text Size</span>
                        </div>
                        <select id="text-size">
                            <option value="small">Small</option>
                            <option value="medium" selected>Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h2 class="settings-title">Notifications</h2>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <i class="fas fa-bell"></i>
                            <span>Enable Notifications</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="notifications-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <i class="fas fa-book"></i>
                            <span>New Book Alerts</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="book-alerts-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h2 class="settings-title">Language</h2>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <i class="fas fa-globe"></i>
                            <span>App Language</span>
                        </div>
                        <select id="app-language">
                            <option value="en">English</option>
                            <option value="fr">French</option>
                            <option value="es">Spanish</option>
                            <option value="de">German</option>
                            <option value="pt">Portuguese</option>
                            <option value="ru">Russian</option>
                            <option value="zh">Chinese</option>
                            <option value="ar">Arabic</option>
                            <option value="ja">Japanese</option>
                            <option value="hi">Hindi</option>
                            <option value="yo">Yoruba</option>
                            <option value="ig">Igbo</option>
                            <option value="ha">Hausa</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn-logout" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Log Out
                </button>
            </div>
            
            <!-- Offline View -->
            <div class="offline-container" id="offline-view">
                <div class="offline-section">
                    <h2 class="offline-title">Offline Books</h2>
                    
                    <div id="offline-content">
                        <div class="offline-empty">
                            <i class="fas fa-download"></i>
                            <h3>No available books offline</h3>
                            <p>Purchase books to read them offline</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <nav class="bottom-nav">
            <a href="#" class="nav-item active" id="nav-home">
                <i class="fas fa-home nav-icon"></i>
                <span>Home</span>
            </a>
            <a href="#" class="nav-item" id="nav-library">
                <i class="fas fa-book nav-icon"></i>
                <span>Library</span>
            </a>
            <a href="#" class="nav-item" id="nav-offline">
                <i class="fas fa-download nav-icon"></i>
                <span>Offline</span>
            </a>
            <a href="#" class="nav-item" id="nav-settings">
                <i class="fas fa-cog nav-icon"></i>
                <span>Settings</span>
            </a>
        </nav>
    </div>

    <script>
        // User Account Management
        const USER_ACCOUNTS_KEY = 'insightAtlasAccounts';
        const CURRENT_USER_KEY = 'insightAtlasCurrentUser';
        const PURCHASED_BOOKS_KEY = 'insightAtlasPurchasedBooks';
        
        // DOM Elements
        const authView = document.getElementById('auth-view');
        const appView = document.getElementById('app-view');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        const otpForm = document.getElementById('otp-form');
        const resetPasswordForm = document.getElementById('reset-password-form');
        const signupLink = document.getElementById('signup-link');
        const loginLink = document.getElementById('login-link');
        const forgotPasswordLink = document.getElementById('forgot-password-link');
        const backToLoginLinks = document.querySelectorAll('#back-to-login, #back-to-login-otp, #back-to-login-reset');
        const resendOtpLink = document.getElementById('resend-otp');
        const togglePasswordIcons = document.querySelectorAll('.toggle-password');
        const welcomeModal = document.getElementById('welcome-modal');
        const closeWelcomeBtn = document.getElementById('close-welcome');
        const userAvatar = document.getElementById('user-avatar');
        const shareLink = document.getElementById('share-link');
        const copyLinkBtn = document.getElementById('copy-link');
        const logoutBtn = document.getElementById('logout-btn');
        
        // Views
        const homeView = document.getElementById('home-view');
        const readerView = document.getElementById('reader-view');
        const settingsView = document.getElementById('settings-view');
        const offlineView = document.getElementById('offline-view');
        
        // Navigation items
        const navHome = document.getElementById('nav-home');
        const navLibrary = document.getElementById('nav-library');
        const navOffline = document.getElementById('nav-offline');
        const navSettings = document.getElementById('nav-settings');
        
        // Buttons
        const readNowBtn = document.getElementById('read-now-btn');
        const buyBookBtn = document.getElementById('buy-book-btn');
        const unlockBtn = document.getElementById('unlock-btn');
        
        // Load user accounts from localStorage
        let userAccounts = JSON.parse(localStorage.getItem(USER_ACCOUNTS_KEY)) || [];
        let currentUser = JSON.parse(localStorage.getItem(CURRENT_USER_KEY)) || null;
        let purchasedBooks = JSON.parse(localStorage.getItem(PURCHASED_BOOKS_KEY)) || [];
        
        // Check if user is logged in
        if (currentUser) {
            showApp();
            updateUserAvatar();
        }
        
        // Toggle password visibility
        function togglePasswordVisibility(targetId) {
            const input = document.getElementById(targetId);
            const icon = document.querySelector(`.toggle-password[data-target="${targetId}"]`);
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
        
        // Show form and hide others
        function showForm(formId) {
            const forms = [loginForm, signupForm, forgotPasswordForm, otpForm, resetPasswordForm];
            forms.forEach(form => form.style.display = 'none');
            document.getElementById(formId).style.display = 'block';
        }
        
        // Show main app
        function showApp() {
            authView.style.display = 'none';
            appView.style.display = 'block';
            showHomeView();
        }
        
        // Show welcome modal
        function showWelcome() {
            welcomeModal.style.display = 'flex';
        }
        
        // Close welcome modal
        function closeWelcome() {
            welcomeModal.style.display = 'none';
        }
        
        // Update user avatar with first letter
        function updateUserAvatar() {
            if (currentUser && currentUser.username) {
                userAvatar.textContent = currentUser.username.charAt(0).toUpperCase();
            }
        }
        
        // Generate OTP
        function generateOTP() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }
        
        // Send OTP to email (simulated)
        function sendOTP(email) {
            const otp = generateOTP();
            
            // In a real app, this would be sent via email service
            // For demo purposes, we'll show it in an alert
            alert(`OTP sent to ${email}: ${otp}\n\nIn a real app, this would be delivered to the user's email.`);
            
            // Save OTP to localStorage for verification
            localStorage.setItem('insightAtlasOTP', otp);
            localStorage.setItem('insightAtlasOTPEmail', email);
            localStorage.setItem('insightAtlasOTPTime', Date.now());
            
            return otp;
        }
        
        // Verify OTP
        function verifyOTP(email, otp) {
            const storedOTP = localStorage.getItem('insightAtlasOTP');
            const storedEmail = localStorage.getItem('insightAtlasOTPEmail');
            const storedTime = localStorage.getItem('insightAtlasOTPTime');
            
            // Check if OTP is expired (5 minutes)
            if (Date.now() - storedTime > 300000) {
                return false;
            }
            
            return storedOTP === otp && storedEmail === email;
        }
        
        // Copy share link to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Link copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }
        
        // Show home view
        function showHomeView() {
            hideAllViews();
            homeView.style.display = 'block';
            setActiveNav('nav-home');
        }
        
        // Show reader view
        function showReaderView() {
            hideAllViews();
            readerView.style.display = 'block';
            setActiveNav('nav-library');
        }
        
        // Show settings view
        function showSettingsView() {
            hideAllViews();
            settingsView.style.display = 'block';
            setActiveNav('nav-settings');
        }
        
        // Show offline view
        function showOfflineView() {
            hideAllViews();
            offlineView.style.display = 'block';
            setActiveNav('nav-offline');
            renderOfflineBooks();
        }
        
        // Hide all views
        function hideAllViews() {
            homeView.style.display = 'none';
            readerView.style.display = 'none';
            settingsView.style.display = 'none';
            offlineView.style.display = 'none';
        }
        
        // Set active navigation item
        function setActiveNav(navId) {
            const navItems = [navHome, navLibrary, navOffline, navSettings];
            navItems.forEach(item => {
                if (item.id === navId) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }
        
        // Render offline books
        function renderOfflineBooks() {
            const offlineContent = document.getElementById('offline-content');
            
            if (purchasedBooks.length === 0) {
                offlineContent.innerHTML = `
                    <div class="offline-empty">
                        <i class="fas fa-download"></i>
                        <h3>No available books offline</h3>
                        <p>Purchase books to read them offline</p>
                    </div>
                `;
            } else {
                offlineContent.innerHTML = `
                    <div class="offline-book-list">
                        ${purchasedBooks.map(book => `
                            <div class="offline-book-item">
                                <div class="offline-book-cover">
                                    <div class="cover-title" style="font-size: 18px;">${book.title}</div>
                                    <div class="cover-author" style="font-size: 14px;">${book.author}</div>
                                </div>
                                <div class="offline-book-title">${book.title}</div>
                                <div class="offline-book-author">${book.author}</div>
                                <button class="btn-read">
                                    <i class="fas fa-book-open"></i> Read
                                </button>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        }
        
        // Purchase book
        function purchaseBook() {
            purchasedBooks.push({
                id: 1,
                title: "The Main Reality Of Life",
                author: "Samuel A.O."
            });
            localStorage.setItem(PURCHASED_BOOKS_KEY, JSON.stringify(purchasedBooks));
            alert('Book purchased successfully! You can now read it offline.');
            renderOfflineBooks();
        }

        // Event Listeners
        togglePasswordIcons.forEach(icon => {
            icon.addEventListener('click', () => {
                const target = icon.dataset.target;
                togglePasswordVisibility(target);
            });
        });
        
        signupLink.addEventListener('click', (e) => {
            e.preventDefault();
            showForm('signup-form');
        });
        
        loginLink.addEventListener('click', (e) => {
            e.preventDefault();
            showForm('login-form');
        });
        
        forgotPasswordLink.addEventListener('click', (e) => {
            e.preventDefault();
            showForm('forgot-password-form');
        });
        
        backToLoginLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                showForm('login-form');
            });
        });
        
        resendOtpLink.addEventListener('click', (e) => {
            e.preventDefault();
            const email = document.getElementById('reset-email').value;
            if (email) {
                sendOTP(email);
                document.getElementById('reset-email-success').style.display = 'block';
            }
        });
        
        closeWelcomeBtn.addEventListener('click', closeWelcome);
        
        copyLinkBtn.addEventListener('click', () => {
            copyToClipboard(shareLink.value);
        });
        
        document.querySelectorAll('.share-icon').forEach(icon => {
            icon.addEventListener('click', () => {
                copyToClipboard(shareLink.value);
            });
        });
        
        logoutBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to log out?')) {
                localStorage.removeItem(CURRENT_USER_KEY);
                location.reload();
            }
        });
        
        // Navigation
        navHome.addEventListener('click', (e) => {
            e.preventDefault();
            showHomeView();
        });
        
        navLibrary.addEventListener('click', (e) => {
            e.preventDefault();
            showReaderView();
        });
        
        navOffline.addEventListener('click', (e) => {
            e.preventDefault();
            showOfflineView();
        });
        
        navSettings.addEventListener('click', (e) => {
            e.preventDefault();
            showSettingsView();
        });
        
        // Book actions
        readNowBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showReaderView();
        });
        
        buyBookBtn.addEventListener('click', (e) => {
            e.preventDefault();
            purchaseBook();
        });
        
        unlockBtn.addEventListener('click', (e) => {
            e.preventDefault();
            purchaseBook();
        });
        
        // Dark mode toggle
        document.getElementById('dark-mode-toggle').addEventListener('change', function() {
            document.body.classList.toggle('light-mode');
        });
        
        // Form Submissions
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value;
            
            // Reset errors
            document.getElementById('login-username-error').style.display = 'none';
            document.getElementById('login-password-error').style.display = 'none';
            
            // Validate inputs
            if (!username) {
                document.getElementById('login-username-error').style.display = 'block';
                return;
            }
            
            if (!password) {
                document.getElementById('login-password-error').style.display = 'block';
                return;
            }
            
            // Find user
            const user = userAccounts.find(account => 
                account.username === username && account.password === password);
            
            if (user) {
                // Login successful
                currentUser = user;
                localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(currentUser));
                showApp();
                showWelcome();
                updateUserAvatar();
            } else {
                document.getElementById('login-password-error').textContent = 'Invalid username or password';
                document.getElementById('login-password-error').style.display = 'block';
            }
        });
        
        signupForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('signup-email').value.trim();
            const username = document.getElementById('signup-username').value.trim();
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            
            // Reset errors
            document.getElementById('signup-email-error').style.display = 'none';
            document.getElementById('signup-username-error').style.display = 'none';
            document.getElementById('signup-password-error').style.display = 'none';
            document.getElementById('signup-confirm-password-error').style.display = 'none';
            document.getElementById('signup-username-available').style.display = 'none';
            
            // Validate inputs
            let isValid = true;
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailRegex.test(email)) {
                document.getElementById('signup-email-error').style.display = 'block';
                isValid = false;
            }
            
            // Username validation
            if (!username || username.length < 4) {
                document.getElementById('signup-username-error').textContent = 'Username must be at least 4 characters';
                document.getElementById('signup-username-error').style.display = 'block';
                isValid = false;
            } else if (userAccounts.some(account => account.username === username)) {
                document.getElementById('signup-username-error').textContent = 'Username is already taken';
                document.getElementById('signup-username-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('signup-username-available').style.display = 'block';
            }
            
            // Password validation
            if (!password || password.length < 8) {
                document.getElementById('signup-password-error').textContent = 'Password must be at least 8 characters';
                document.getElementById('signup-password-error').style.display = 'block';
                isValid = false;
            }
            
            // Password match validation
            if (password !== confirmPassword) {
                document.getElementById('signup-confirm-password-error').style.display = 'block';
                isValid = false;
            }
            
            if (isValid) {
                // Create new account
                const newAccount = {
                    email,
                    username,
                    password
                };
                
                // Save account
                userAccounts.push(newAccount);
                localStorage.setItem(USER_ACCOUNTS_KEY, JSON.stringify(userAccounts));
                
                // Set as current user
                currentUser = newAccount;
                localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(currentUser));
                
                // Show app
                showApp();
                showWelcome();
                updateUserAvatar();
            }
        });
        
        forgotPasswordForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('reset-email').value.trim();
            
            // Reset messages
            document.getElementById('reset-email-error').style.display = 'none';
            document.getElementById('reset-email-success').style.display = 'none';
            
            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailRegex.test(email)) {
                document.getElementById('reset-email-error').textContent = 'Please enter a valid email address';
                document.getElementById('reset-email-error').style.display = 'block';
                return;
            }
            
            // Check if email exists
            const userExists = userAccounts.some(account => account.email === email);
            if (!userExists) {
                document.getElementById('reset-email-error').textContent = 'Email not found in our system';
                document.getElementById('reset-email-error').style.display = 'block';
                return;
            }
            
            // Send OTP
            sendOTP(email);
            document.getElementById('reset-email-success').style.display = 'block';
            showForm('otp-form');
        });
        
        otpForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('reset-email').value.trim();
            const otpInputs = document.querySelectorAll('.otp-input');
            let otp = '';
            
            otpInputs.forEach(input => {
                otp += input.value;
            });
            
            // Reset error
            document.getElementById('otp-error').style.display = 'none';
            
            // Verify OTP
            if (verifyOTP(email, otp)) {
                showForm('reset-password-form');
            } else {
                document.getElementById('otp-error').style.display = 'block';
            }
        });
        
        resetPasswordForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-new-password').value;
            const email = document.getElementById('reset-email').value.trim();
            
            // Reset errors
            document.getElementById('new-password-error').style.display = 'none';
            document.getElementById('confirm-new-password-error').style.display = 'none';
            
            // Validate inputs
            let isValid = true;
            
            if (!newPassword || newPassword.length < 8) {
                document.getElementById('new-password-error').textContent = 'Password must be at least 8 characters';
                document.getElementById('new-password-error').style.display = 'block';
                isValid = false;
            }
            
            if (newPassword !== confirmPassword) {
                document.getElementById('confirm-new-password-error').style.display = 'block';
                isValid = false;
            }
            
            if (isValid) {
                // Update password
                const userIndex = userAccounts.findIndex(account => account.email === email);
                if (userIndex !== -1) {
                    userAccounts[userIndex].password = newPassword;
                    localStorage.setItem(USER_ACCOUNTS_KEY, JSON.stringify(userAccounts));
                    
                    // Clear OTP data
                    localStorage.removeItem('insightAtlasOTP');
                    localStorage.removeItem('insightAtlasOTPEmail');
                    localStorage.removeItem('insightAtlasOTPTime');
                    
                    alert('Password reset successfully! You can now login with your new password.');
                    showForm('login-form');
                }
            }
        });
    </script>
</body>
</html>
